ffmpeg -i  "/var/www/dht/back/helpers/../media/podcasts/Tehran Night #338 NAP.mp4" -filter_complex "[0:v]split=3[v1][v2][v3]; [v1]copy[v1out]; [v2]scale=w=1280:h=720[v2out]; [v3]scale=w=640:h=360[v3out]" -map [v1out] -c:v:0 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:0 5M -maxrate:v:0 5M -minrate:v:0 5M -bufsize:v:0 10M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map [v2out] -c:v:1 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:1 3M -maxrate:v:1 3M -minrate:v:1 3M -bufsize:v:1 3M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map [v3out] -c:v:2 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:2 1M -maxrate:v:2 1M -minrate:v:2 1M -bufsize:v:2 1M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map a:0 -c:a:0 aac -b:a:0 96k -ac 2 -map a:0 -c:a:1 aac -b:a:1 96k -ac 2 -map a:0 -c:a:2 aac -b:a:2 48k -ac 2 -f hls -hls_time 2 -hls_playlist_type vod -hls_flags independent_segments -hls_segment_type mpegts -hls_segment_filename stream_%v/data%02d.ts -master_pl_name master.m3u8 -var_stream_map "v:0,a:0 v:1,a:1 v:2,a:2" stream_%v.m3u8


ffmpeg -i "/var/www/dht/back/helpers/../media/podcasts/Tehran Night #338 NAP.mp4"   -pix_fmt yuyv422 -s:v 640x480 -r 25  -c:v libx264 -crf 21 -preset veryfast     -c:a aac -b:a 128k -ac 2     -f hls -hls_time 4 -hls_playlist_type event stream.m3u8


`ffmpeg -v verbose    -re    -i "/var/www/dht/back/helpers/../media/podcasts/Tehran Night #338 NAP.mp4"  -vf format=yuv420p  -c:v libx264    -b:v 5000k    -f hls    -hls_time 6    -hls_list_size 4    -hls_wrap 40    -hls_delete_threshold 1    -hls_flags delete_segments    -hls_start_number_source datetime    -preset superfast    -start_number 10    ./stream.m3u8`



ffmpeg -i "/var/www/dht/back/helpers/../media/podcasts/Tehran Night #338 NAP.mp4" -filter_complex "[0:v]split=3[v1][v2][v3]; [v1]copy[v1out]; [v2]scale=w=1280:h=720[v2out]; [v3]scale=w=640:h=360[v3out]" -map [v1out] -c:v:0 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:0 5M -maxrate:v:0 5M -minrate:v:0 5M -bufsize:v:0 10M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map [v2out] -c:v:1 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:1 3M -maxrate:v:1 3M -minrate:v:1 3M -bufsize:v:1 3M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map [v3out] -c:v:2 libx264 -x264-params "nal-hrd=cbr:force-cfr=1" -b:v:2 1M -maxrate:v:2 1M -minrate:v:2 1M -bufsize:v:2 1M -preset slow -g 48 -sc_threshold 0 -keyint_min 48 -map a:0 -c:a:0 aac -b:a:0 96k -ac 2 -map a:0 -c:a:1 aac -b:a:1 96k -ac 2 -map a:0 -c:a:2 aac -b:a:2 48k -ac 2 -f hls -hls_time 2 -hls_playlist_type vod -hls_flags independent_segments -hls_segment_type mpegts -hls_segment_filename stream_%v/data%02d.ts -master_pl_name master.m3u8 -var_stream_map "v:0,a:0 v:1,a:1 v:2,a:2" stream_%v.m3u8


ffmpeg -y -ss 00:00:00 -re -i "safarnak.mp3"  -preset slow -g 48 -sc_threshold 0   -map 0:0 -map 0:1 -map 0:0 -map 0:1   -s:v:0 640x360 -c:v:0 libx264 -b:v:0 365k   -s:v:1 960x540 -c:v:1 libx264 -b:v:1 2000k    -c:a copy   -var_stream_map "v:0,a:0 v:1,a:1"   -master_pl_name master.m3u8   -f hls -hls_time 6 -hls_list_size 0   -hls_segment_filename "v%v/fileSequence%d.ts"   v%v/prog_index.m3u8
ffmpeg -y -ss 00:00:00 -re -i "/var/www/dht/back/helpers/../media/podcasts/Safarnak.mp3" -preset slow -g 48 -sc_threshold 0   -map 0:0 -map 0:1 -map 0:0 -map 0:1   -s:v:0 640x360 -c:v:0 libx264 -b:v:0 365k   -s:v:1 960x540 -c:v:1 libx264 -b:v:1 2000k    -c:a copy   -var_stream_map "v:0,a:0 v:1,a:1"   -master_pl_name master.m3u8   -f hls -hls_time 6 -hls_list_size 0   -hls_segment_filename "v%v/fileSequence%d.ts"    "/var/www/html/stream/ch2/live2.m3u8"


ffmpeg -y -re -i "/var/www/dht/back/helpers/../media/podcasts/Safarnak.mp3" -c:a aac -b:a 128k -muxdelay 0 -fflags nobuffer -f segment -sc_threshold 0 -segment_time 7 -segment_list  "/var/www/html/stream/ch2/hls/live2.m3u8" -segment_format mpegts "/var/www/html/stream/ch2/hls/file%d.m4a" 